(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ba643b8"],{"266c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAH5klEQVR4Xu2dTVbjRhCAqyYPsww3iHKCwAliFpiXHWzGsMpwgiEnCDlBmBNAVmPPBnZ5eBaQE0BOEOUGsARe6Dz5Bwv/VUvqrv6rWY6x1F31qdT9qdVGkH9JRwCT7r10HgSAxCEQAASAxCOQePelAggAiUcg8e5LBRAAEo9A4t2XCiAAJB6BxLsvFUAASDwCiXdfKoAA4CYC2aD3ERS2AdWGmxZ4claF94DqJu8cfHLRIicVIBv0zhDwg4sO+3pOBeo87xwccbePHYDsqn+CCL9ydzSE8ykFv+W73RPOtrICkF319xDhgrODoZ1LKdjPd7uXXO1mAyD783MG37y7RYC07/lEZhXAPfz3spX/dJhzQMACQHZ9sQHPT9cIsMnRqdDPoQDuYK21nW/v39vuCw8AMuirnEeuQaF1ALLBlw8I6qxyBOQLoACP8s77c5uhsApANviyiaBubXYg9mMrwK288/7OVj+tATC87z893iJiZqvxKRxXKZVDa33L1njAHgCD3jUCtlNIku0+Khiawm0b57ECgMge86myJYmMAyCyx3zyJ0e0IYmMAiCyx17yiyPbkETGABDZYzf5r1XAsCQyB4DIHh4ChpXA3JNDIwCI7GHL/euJTEmixgCI7OFP/vR20FwSNQJAZI+75A8HhQYkUTMARPa4JWA0HmgkiWoDILLHee6n44EGK4lqASCyx5/kN5VElQEQ2eNf8ptIokoAiOzxM/lNJFE1AET2+E1ADUmkDYDIHu9zX0sSaQEgsiec5FeVRCQAInvCS34VSUQDILInTAI0JdFKAET2BJt7bUm0FACRPeEnX0cSLQRAZE88yack0RwAInviSj4lieYBGPROEfBjnGFIu1cK1Ke8c3BcjsIbALKvn9uo3l2nHaa4e6/wZTvfObyZ9PItAG43b3go3oodv0H8baRpcN7H2fcLZipA7xgV/s4d/KJR0GqdTl5/yr66aYfNfitUv+Q7B6fFOUZy7enYxU4p5XYUbXkLwPXFBj4/FRsTsF2BSsEf+W53br+gmJ49LFvAmV31zxHhZ5vgzRz7Qa21svJ7hgsGgbxv9K56+zUGCFat3uUecy2K9WIPwPhO/z+d7mobGfCsZNGoe/Zq/37QVxwVYBmIy00gEwSzo9JFwXBQKhvnZNmtrXxgrgqwqgpRzwKs36N0V7Vmg/4NAvzYODMMB1AAf+WdLvlqfMbwoI0CkX4ayDBQ0XnVafxY+gYRf2DIYe1TKKX+htZ6m9rQgWOzTCr5c7OAZb3Ornp3tgOv8/57AQE+P94B4He1M2T1i+pftba+SSafwbcUIOa7B+SubGQFmM5bH61ffTrvu41XJxUmi22qqsnMgwJsU/v5cMxsdKuQdgWYQMDhCHQ2QfAQAr3k8+yUOjfXXwWwVgWYHIAj8MNNEAC3fbiSNK98re3citgBqGKzTJs7pWqBuPRhkE6HORaIhgSB7m2LIfkFiJW3lKtUAUqVwPrmj7rbpWYORZGO6OFaX6ED4qILvBYAwzEBgyjShoBhqjobPJ0plu/JrzQIdGXolILLfLe7T92eOEWRtui56l8gwh7V9iaf64BobBDoDAKNPXG4RJHuFMsX0UPBVfsW8MZpJyOKwhM9PACM9gWOXRRpTbFYxkaauplKfuMxwJsqwLSYxJEo0ku+h6KHgsDILSB2UaQzxfJV9LACMJ4eWv+NAE5R5FHya4kedgC8cwQNRFEMoscJAN5BUEMU6cyvQxA9zgAYQlAj8FSDFxg546IoJtFDxdPoIDAGURSb6HEOwKgShLKiKD7R4wcAYYgivbk+x0Mwg6LHCwCGVcBvUaSX/ABFjzcAlByB1fV8dRyBR3N9LRCppFb53PogcLYxvq0oKtpH/Tonk+WzInooGNgB8M0RUAGKYa6/qo9OAAgFgtiTb/RpIHUlOXMEmiuKlrTP+xU9deJe/o6zCjBpBIst1FhRND9W6Z0h4Ny+BU0DXv6+jm42eb5Fx3IOgE+iqATlie3dO3Rf3UoDAL9Ekf0l74yihwLIiwrgiyhi2h210qtbVAKbfu4NAK5FEdNcn130UIB4BUAJgluq4U0/VwgnoHC0Xx6qNio4aXpM6vt1Xt2ijtn0c+8A4HIETQNX9fs6urnqMU38vZcAxAaBr8kfFj8TFNk6BocjsNX2yXF9mOuv6qPXAIwcAftmisaY8D353leAqZixv6LIWNbHB/JF9FD98r4CDKsAkyiigqX7ue66Qt3j2fy7IACYQMCxR5GBYHsleqj+BAPAeGZQvHVkdUURFTDic+9ED9WfoAAoQWBdFFGBW/S5j6KH6kdwAPjqCHye6wc9DVzWeI738Kmr53WuD3hErSvUPRb33wVZAabTQ/eOIIS5fpQVwAcIQk9+MCKIKoscr57NtiEU0UPFLuhbwGsVYBZFIYmeJABgFkVBiZ5kAGASRcGJnqQAsC2KQhQ9yQFgSxSFKnqSBMA0BLEmP5pp4FJbaGAxSQxz/ahFEFXimqwoij350VeAqS2svqIoFtFDXSBRiCCqk1VXFMUkeqjYJAFARVEUlegRAEoR0PjVs+hEjwAwE4FVexTFKHoEgAURGP9q92Xp10cfFL7s5TuHo3cFE/qXzBhgUU4LEIr/TzHxk3gkDUBCF/rSrgoAiVMgAAgAiUcg8e5LBRAAEo9A4t2XCiAAJB6BxLsvFUAASDwCiXf/f9SnRMwRbvndAAAAAElFTkSuQmCC"},"2e2f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container pull-height",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}}},[e._m(0),e._v(" "),r("div",{staticClass:"login-border  animated fadeInRight"},[r("div",{staticClass:"login-main"},[r("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.qr_res,expression:"qr_res"}]},[r("canvas",{staticStyle:{margin:"0 0 0 10px"},attrs:{id:"canvas"}}),e._v(" "),r("el-alert",{attrs:{title:"请用谷歌验证器扫描二维码",type:"error",closable:!1}}),e._v(" "),r("el-button",{staticClass:"login-submit",attrs:{round:"",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.pagetoLogin(t)}}},[e._v("完成")])],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.qr_res,expression:"!qr_res"}]},[r("h4",{staticClass:"login-title"},[r("el-button",{attrs:{round:""},nativeOn:{click:function(t){return t.preventDefault(),e.pagetoLogin(t)}}},[e._v("返回首页")])],1),e._v(" "),r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",model:e.loginForm,rules:e.loginRules,"label-width":"0"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"username",attrs:{size:"small",autofocus:"",placeholder:"账户名",maxlength:"16"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,size:"small","auto-complete":"off",placeholder:"设置密码",maxlength:"16"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password2"}},[r("el-input",{key:e.passwordType,ref:"password2",attrs:{type:e.passwordType,size:"small","auto-complete":"off",placeholder:"确认密码",maxlength:"16"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password2,callback:function(t){e.$set(e.loginForm,"password2",t)},expression:"loginForm.password2"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"login-submit",attrs:{type:"primary",loading:e.loading,size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("注册")])],1)],1)],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-info text-white animated fadeInLeft"},[n("div",{staticClass:"logo",staticStyle:{"margin-top":"-426px"}},[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:r("266c"),width:"160px",height:"160px",alt:"logo"}})]),e._v(" "),n("h2",{staticClass:"login-info-title"}),e._v(" "),n("ul",{staticClass:"login-info-list"})])}],i=r("61f7"),s=r("4328"),a=r.n(s),l=r("8237"),c=r.n(l),u=r("d055"),g=r.n(u),A={name:"Reg",data:function(){var e=this,t=function(t,r,n){if(Object(i["b"])(r)){var o={user_name:e.loginForm.username};e.$http.post("check_username",a.a.stringify(o)).then((function(e){0===e.ret_code?n():e.ret_code>0?n(new Error("用户名已存在")):n(new Error("请重新填写"))})).catch((function(e){console.log(e),n(new Error("网络错误"))}))}else n(new Error("请输入正确的用户名"))},r=function(e,t,r){t.length<6?r(new Error("密码长度最少为6位")):r()},n=function(t,r,n){r.length<6?n(new Error("密码长度最少为6位")):r!==e.loginForm.password?n(new Error("两次密码输入不一致")):n()};return{loginForm:{username:"",password:"",password2:""},loginRules:{username:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:r}],password2:[{required:!0,trigger:"blur",validator:n}]},activeName:"user",loading:!1,checked:!1,passwordType:"password",redirect:void 0,qr_res:!1}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{handleLogin:function(){var e=this,t=this;t.$refs.loginForm.validate((function(r){if(!r)return console.log("error submit!!"),!1;t.loading=!0;var n={user_name:e.loginForm.username,passwd:c()(e.loginForm.password)};t.$http.post("signup",a.a.stringify(n)).then((function(e){if(t.loading=!1,e.ret_code>0){var r=e.ret_data.url,n=document.getElementById("canvas");g.a.toCanvas(n,r,(function(e){if(e)return console.log(e),t.qr_res=!1,void t.$message({message:"谷歌二维码生成失败",type:"error",center:!0});t.qr_res=!0,console.log("QRCode success!")}))}else t.$message({message:e.ret_msg,type:"error",center:!0})})).catch((function(e){t.loading=!1,console.log(e)}))}))},pagetoLogin:function(){this.$router.push("/login")}}},d=A,m=(r("37f2"),r("2877")),p=Object(m["a"])(d,n,o,!1,null,null,null);t["default"]=p.exports},"37f2":function(e,t,r){"use strict";var n=r("5a8f"),o=r.n(n);o.a},"5a8f":function(e,t,r){}}]);